<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hero Hero Clicker Wiki</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

    <!-- Firebase -->
    <script type="module">
        // Import all necessary Firebase modules
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged, signInWithCustomToken } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, query, orderBy, limit, onSnapshot, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { setLogLevel } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // --- ADAPTATION FOR GITHUB PAGES: CHECK FOR CONFIG GLOBALS ---
        const config = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {};
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'hero-hero-wiki-default';
        const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
        
        let db = null;
        let auth = null;
        let currentUser = null;
        let isFirebaseActive = false;
        
        const submitBtn = document.getElementById('btn-submit');
        const statusSpan = document.getElementById('chat-status');
        const forumContainer = document.getElementById('forum-container');

        // Check if configuration exists to enable Firebase services
        if (Object.keys(config).length > 0 && config.apiKey) {
            
            setLogLevel('Debug'); // Enable debug logging
            isFirebaseActive = true;
            
            // Initialize Firebase
            const app = initializeApp(config);
            auth = getAuth(app);
            db = getFirestore(app);
            
            // --- Auth Logic ---
            async function initAuth() {
                try {
                    if (statusSpan) statusSpan.innerText = "Connecting to guild...";
                    
                    if (initialAuthToken) {
                        await signInWithCustomToken(auth, initialAuthToken);
                    } else {
                        await signInAnonymously(auth);
                    }
                } catch (error) {
                    console.error("Auth failed:", error);
                    if (statusSpan) statusSpan.innerText = "Connection Failed (See Console)";
                }
            }

            initAuth();

            onAuthStateChanged(auth, (user) => {
                currentUser = user;
                if (user) {
                    // Display user ID only partially for privacy, but store full ID
                    const displayUid = user.uid.length > 8 ? user.uid.substring(0, 4) + '...' + user.uid.substring(user.uid.length - 4) : user.uid;
                    if (statusSpan) {
                        statusSpan.innerText = "Online (UID: " + displayUid + ")";
                        statusSpan.classList.add('text-green-400');
                    }
                    loadForumPosts();
                } else {
                    if (statusSpan) statusSpan.innerText = "Offline (Anonymous)";
                }
            });

            // --- Forum Logic ---
            window.submitPost = async function() {
                const nameInput = document.getElementById('forum-name');
                const msgInput = document.getElementById('forum-message');
                const name = nameInput.value.trim() || 'Anonymous Hero';
                const message = msgInput.value.trim();

                if (!message) {
                    // Simple in-app warning
                    msgInput.placeholder = "Message is required!";
                    msgInput.classList.add('border-red-500');
                    setTimeout(() => {
                        msgInput.placeholder = "Type your message...";
                        msgInput.classList.remove('border-red-500');
                    }, 2000);
                    return;
                }
                if (!currentUser) {
                    if (statusSpan) statusSpan.innerText = "Authentication required. Try again in a moment.";
                    showErrorModal("Connection error. Please wait for the chat to initialize.");
                    return;
                }

                // Visual feedback
                const btn = document.getElementById('btn-submit');
                const originalText = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
                btn.disabled = true;

                try {
                    // FireStore Path: /artifacts/{appId}/public/data/forum_posts
                    await addDoc(collection(db, 'artifacts', appId, 'public', 'data', 'forum_posts'), {
                        name: name,
                        message: message,
                        timestamp: serverTimestamp(),
                        uid: currentUser.uid
                    });
                    msgInput.value = ''; // Clear input
                } catch (e) {
                    console.error("Error posting:", e);
                    showErrorModal("Failed to send message: " + e.message);
                } finally {
                    btn.innerHTML = originalText;
                    btn.disabled = false;
                }
            };

            function loadForumPosts() {
                const q = query(
                    collection(db, 'artifacts', appId, 'public', 'data', 'forum_posts'), 
                    orderBy('timestamp', 'desc'), 
                    limit(50)
                );

                onSnapshot(q, (snapshot) => {
                    const container = document.getElementById('forum-posts');
                    if (!container) return;
                    
                    container.innerHTML = '';
                    
                    if (snapshot.empty) {
                        container.innerHTML = '<p class="text-gray-500 text-center mt-4">No messages yet. Be the first!</p>';
                        return;
                    }

                    snapshot.forEach((doc) => {
                        const data = doc.data();
                        const div = document.createElement('div');
                        const isCurrentUser = currentUser && data.uid === currentUser.uid;
                        const bgColor = isCurrentUser ? 'bg-purple-900/40' : 'bg-gray-800';
                        const borderColor = isCurrentUser ? 'border-purple-600' : 'border-gray-600';

                        div.className = `${bgColor} border ${borderColor} p-3 rounded mb-2 shadow-sm animate-fade-in`;
                        
                        const time = data.timestamp ? new Date(data.timestamp.toDate()).toLocaleString() : 'Just now';
                        
                        div.innerHTML = `
                            <div class="flex justify-between items-start">
                                <h4 class="font-bold text-yellow-500 text-sm"><i class="fas fa-user-shield mr-1"></i> ${escapeHtml(data.name)}</h4>
                                <span class="text-[10px] text-gray-400">${time}</span>
                            </div>
                            <p class="text-gray-200 text-sm mt-1 whitespace-pre-wrap break-words">${escapeHtml(data.message)}</p>
                        `;
                        container.appendChild(div);
                    });
                }, (error) => {
                    console.error("Forum load error:", error);
                    const container = document.getElementById('forum-posts');
                    if(container) container.innerHTML = '<p class="text-red-400 text-center">Error loading scrolls (check console).</p>';
                });
            }

        } else {
            // --- GITHUB PAGES FALLBACK LOGIC ---
            console.warn("Firebase configuration not found. Chat/Forum feature is disabled in this static environment.");
            if (statusSpan) statusSpan.innerText = "Disabled (Static Host)";
            if (forumContainer) {
                forumContainer.innerHTML = `
                    <div class="p-6 text-center bg-slate-800 rounded-lg h-full flex flex-col items-center justify-center">
                        <i class="fas fa-plug-slash text-6xl text-red-500 mb-4"></i>
                        <p class="text-lg text-gray-300 font-bold">Chat Disabled</p>
                        <p class="text-sm text-gray-400 mt-2">The live forum requires backend services which are unavailable on static hosting (like GitHub Pages).</p>
                        <p class="text-xs text-yellow-400 mt-3">Please use the Discord link instead!</p>
                    </div>
                `;
            }

            window.submitPost = () => { showErrorModal("Chat is disabled in this environment."); };
        }

        function escapeHtml(text) {
            if (!text) return "";
            return text
                .replace(/&/g, "&amp;")
                .replace(/</g, "&lt;")
                .replace(/>/g, "&gt;")
                .replace(/"/g, "&quot;")
                .replace(/'/g, "&#039;");
        }
        
        // Custom Modal Function (as alert() is forbidden)
        function showErrorModal(message) {
            let modal = document.getElementById('error-modal');
            if (!modal) {
                modal = document.createElement('div');
                modal.id = 'error-modal';
                modal.className = 'fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50 transition-opacity duration-300 opacity-0 pointer-events-none';
                modal.innerHTML = `
                    <div class="bg-slate-800 p-6 rounded-lg shadow-xl border-t-4 border-red-500 max-w-sm mx-4 transform transition-transform duration-300 scale-95">
                        <h3 class="text-xl font-bold text-red-400 mb-3">Error</h3>
                        <p id="modal-message" class="text-gray-200 mb-4 text-sm"></p>
                        <button onclick="document.getElementById('error-modal').classList.add('opacity-0', 'pointer-events-none'); document.getElementById('error-modal').classList.remove('opacity-100', 'pointer-events-auto');" class="w-full bg-red-600 hover:bg-red-500 text-white font-bold py-2 rounded transition">Close</button>
                    </div>
                `;
                document.body.appendChild(modal);
            }
            
            document.getElementById('modal-message').innerText = message;
            modal.classList.add('opacity-100', 'pointer-events-auto');
            modal.classList.remove('opacity-0', 'pointer-events-none');
        }

        window.showErrorModal = showErrorModal;
    </script>

    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #0f172a; /* darker background */
            color: #e2e8f0;
        }
        h1, h2, h3, .pixel-font {
            font-family: 'Press+Start+2P', cursive;
        }
        .nav-item.active {
            background-color: #eab308; /* yellow-500 */
            color: #000;
            box-shadow: 0 0 10px rgba(234, 179, 8, 0.5);
        }
        .custom-scroll::-webkit-scrollbar {
            width: 8px;
        }
        .custom-scroll::-webkit-scrollbar-track {
            background: #1e293b; 
        }
        .custom-scroll::-webkit-scrollbar-thumb {
            background: #4b5563; 
            border-radius: 4px;
        }
        .custom-scroll::-webkit-scrollbar-thumb:hover {
            background: #eab308;
        }
        .section-content {
            display: none;
            animation: slideUp 0.4s ease-out;
        }
        .section-content.active {
            display: block;
        }
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .card-glass {
            background: rgba(30, 41, 59, 0.7);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .rare-gradient {
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
        }
        .legendary-gradient {
            background: linear-gradient(135deg, #713f12 0%, #ca8a04 100%);
        }
        /* Custom colors for pet rarity */
        .rarity-Common { background: #374151; border-color: #4b5563; }
        .rarity-Uncommon { background: #166534; border-color: #4ade80; }
        .rarity-Epic { background: #1e40af; border-color: #60a5fa; }
        .rarity-Mythic { background: #581c87; border-color: #a855f7; }
        .rarity-Demoniac { background: #991b1b; border-color: #ef4444; }
        .rarity-Divine { background: #a16207; border-color: #fde047; }
        .rarity-Primordial { background: #831843; border-color: #f472b6; }

        .rarity-Common-text { color: #d1d5db; }
        .rarity-Uncommon-text { color: #4ade80; }
        .rarity-Epic-text { color: #60a5fa; }
        .rarity-Mythic-text { color: #a855f7; }
        .rarity-Demoniac-text { color: #ef4444; }
        .rarity-Divine-text { color: #fde047; }
        .rarity-Primordial-text { color: #f472b6; }

        /* Pet Details Modal Styling */
        #pet-detail-modal {
            transition: opacity 0.3s, transform 0.3s;
        }
        #pet-detail-modal.hidden {
            opacity: 0;
            transform: scale(0.9);
            pointer-events: none;
        }
        #pet-detail-modal:not(.hidden) {
            opacity: 1;
            transform: scale(1);
            pointer-events: auto;
        }
    </style>
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-slate-900 border-b-2 border-yellow-600 sticky top-0 z-50 shadow-2xl">
        <div class="container mx-auto px-4 py-3 flex flex-col md:flex-row justify-between items-center gap-4">
            <div class="flex items-center gap-3">
                <div class="w-12 h-12 bg-yellow-500 rounded-lg flex items-center justify-center text-black font-bold text-2xl border-4 border-yellow-700 shadow-lg transform hover:scale-110 transition">H</div>
                <div>
                    <h1 class="text-yellow-400 text-sm md:text-lg tracking-widest leading-tight">HERO HERO</h1>
                    <span class="text-slate-400 text-[10px] uppercase tracking-[0.2em] block">Official Wiki</span>
                </div>
            </div>
            
            <!-- Language Selector -->
            <div class="flex bg-slate-800 p-1 rounded-lg border border-slate-700">
                <button onclick="setLang('en')" class="lang-btn px-3 py-1 text-xs font-bold rounded transition hover:text-white text-gray-400" id="btn-en">ðŸ‡ºðŸ‡¸ EN</button>
                <div class="w-px bg-slate-600 my-1"></div>
                <button onclick="setLang('es')" class="lang-btn px-3 py-1 text-xs font-bold rounded transition hover:text-white text-gray-400" id="btn-es">ðŸ‡ªðŸ‡¸ ES</button>
                <div class="w-px bg-slate-600 my-1"></div>
                <button onclick="setLang('pt')" class="lang-btn px-3 py-1 text-xs font-bold rounded transition hover:text-white text-gray-400" id="btn-pt">ðŸ‡§ðŸ‡· PT</button>
            </div>
        </div>
        
        <!-- Navigation -->
        <nav class="bg-slate-800 shadow-inner overflow-x-auto">
            <div class="container mx-auto flex px-2 text-xs md:text-sm font-bold uppercase tracking-wide whitespace-nowrap">
                <button onclick="showSection('map')" class="nav-item active flex-1 md:flex-none px-6 py-3 hover:bg-slate-700 transition" data-key="nav_map"><i class="fas fa-map mr-2"></i>Map</button>
                <button onclick="showSection('mounts')" class="nav-item flex-1 md:flex-none px-6 py-3 hover:bg-slate-700 transition" data-key="nav_mounts"><i class="fas fa-chess-knight mr-2"></i>Mounts</button>
                <button onclick="showSection('pets')" class="nav-item flex-1 md:flex-none px-6 py-3 hover:bg-slate-700 transition" data-key="nav_pets"><i class="fas fa-paw mr-2"></i>Pets</button>
                <button onclick="showSection('boss')" class="nav-item flex-1 md:flex-none px-6 py-3 hover:bg-slate-700 transition" data-key="nav_boss"><i class="fas fa-skull-crossbones mr-2"></i>Boss</button>
                <button onclick="showSection('expeditions')" class="nav-item flex-1 md:flex-none px-6 py-3 hover:bg-slate-700 transition" data-key="nav_expeditions"><i class="fas fa-compass mr-2"></i>Expeditions</button>
                <button onclick="showSection('medal')" class="nav-item flex-1 md:flex-none px-6 py-3 hover:bg-slate-700 transition" data-key="nav_medal"><i class="fas fa-medal mr-2"></i>Honor</button>
                <button onclick="showSection('forum')" class="nav-item flex-1 md:flex-none px-6 py-3 hover:bg-slate-700 transition border-l border-slate-600 text-purple-400"><i class="fas fa-comments mr-2"></i>Chat</button>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-8 flex-grow">
        
        <!-- Kingdom Map Section -->
        <div id="section-map" class="section-content active">
            <div class="flex items-center justify-between mb-6 border-b border-gray-700 pb-4">
                <h2 class="text-2xl text-yellow-400 pixel-font" data-key="map_title">Kingdom Map</h2>
                <span class="bg-red-900 text-red-100 text-xs px-2 py-1 rounded border border-red-500 font-mono" data-key="map_req_tag">Req: Day 1,000</span>
            </div>
            
            <div class="grid lg:grid-cols-12 gap-8">
                <!-- Map Image Column -->
                <div class="lg:col-span-7 space-y-4">
                    <div class="relative group bg-black rounded-xl overflow-hidden border-2 border-slate-600 shadow-2xl">
                        <!-- START: Your Image from PostImage -->
                        <img id="kingdom-map-image" 
                             src="https://i.postimg.cc/QtCkjtz9/unnamed67.jpg" 
                             alt="The Continent of Grimar Map" 
                             class="w-full h-auto object-contain min-h-[400px] bg-gradient-to-br from-slate-900 to-purple-900"
                             onerror="this.onerror=null; this.src='https://i.imgur.com/6jKd3WQ.png'; this.alt='Fallback Map Image'; document.getElementById('map-error-fallback').style.display='flex';"
                        >
                        
                        <!-- Fallback Message -->
                        <div id="map-error-fallback" style="display: none;" class="absolute inset-0 bg-gradient-to-br from-slate-900 to-purple-900 flex flex-col items-center justify-center p-6 text-center">
                            <i class="fas fa-exclamation-triangle text-yellow-500 text-4xl mb-4"></i>
                            <p class="text-xl font-bold text-white mb-2">Map Image Unavailable</p>
                            <p class="text-gray-300 mb-4">The map image failed to load. Here's a placeholder instead.</p>
                            <p class="text-xs text-gray-400">Trying alternative image source...</p>
                        </div>
                        <!-- END: Your Image from PostImage -->
                        
                        <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black to-transparent p-4">
                            <p class="text-center text-xs text-gray-300" data-key="map_img_caption">The Continent of Grimar - 124 Territories</p>
                        </div>
                    </div>
                </div>
                
                <!-- Map Details Column -->
                <div class="lg:col-span-5 space-y-6">
                    <div class="bg-slate-800 p-5 rounded-lg border-l-4 border-green-500 shadow-lg">
                        <h3 class="font-bold text-white text-lg mb-2" data-key="map_overview">Overview</h3>
                        <p class="text-sm text-gray-300 leading-relaxed" data-key="map_desc_long">
                            Unlocked when the hero reaches <strong>Day 1,000</strong>. Use <strong>Horns</strong> to conquer the 124 distinct territories. This is the core mid-game progression system.
                        </p>
                    </div>

                    <div class="bg-slate-800 rounded-lg border border-slate-700 overflow-hidden">
                        <div class="bg-slate-900 px-4 py-2 border-b border-slate-700">
                            <h4 class="font-bold text-yellow-500 text-sm uppercase" data-key="map_locations">Territory Types</h4>
                        </div>
                        <div class="divide-y divide-slate-700">
                            <!-- Building -->
                            <div class="p-3 hover:bg-slate-750 flex gap-3">
                                <div class="bg-orange-900/50 p-2 rounded w-10 h-10 flex items-center justify-center text-orange-400"><i class="fas fa-hammer"></i></div>
                                <div>
                                    <h5 class="font-bold text-sm text-orange-200" data-key="loc_build">Building Improvement</h5>
                                    <p class="text-xs text-gray-400" data-key="loc_build_desc">Begin construction at higher levels instantly after rebirth.</p>
                                </div>
                            </div>
                            <!-- Attack -->
                            <div class="p-3 hover:bg-slate-750 flex gap-3">
                                <div class="bg-red-900/50 p-2 rounded w-10 h-10 flex items-center justify-center text-red-400"><i class="fas fa-sword"></i></div>
                                <div>
                                    <h5 class="font-bold text-sm text-red-200" data-key="loc_attack">Hero Attack</h5>
                                    <p class="text-xs text-gray-400" data-key="loc_attack_desc">Boosts Attack, Critical Rate, Hit Kill Chance, and World Boss Damage.</p>
                                </div>
                            </div>
                            <!-- Pickaxes -->
                            <div class="p-3 hover:bg-slate-750 flex gap-3">
                                <div class="bg-blue-900/50 p-2 rounded w-10 h-10 flex items-center justify-center text-blue-400"><i class="fas fa-tools"></i></div>
                                <div>
                                    <h5 class="font-bold text-sm text-blue-200" data-key="loc_pick">Automatic Pickaxes</h5>
                                    <p class="text-xs text-gray-400" data-key="loc_pick_desc">Counts as a click from the Naked Dwarf automatically.</p>
                                </div>
                            </div>
                            <!-- Witches -->
                            <div class="p-3 hover:bg-slate-750 flex gap-3">
                                <div class="bg-purple-900/50 p-2 rounded w-10 h-10 flex items-center justify-center text-purple-400"><i class="fas fa-hat-wizard"></i></div>
                                <div>
                                    <h5 class="font-bold text-sm text-purple-200" data-key="loc_witch">Witches</h5>
                                    <p class="text-xs text-gray-400" data-key="loc_witch_desc">Unlocks Mounts in the store. Also sells special UR Mount packages.</p>
                                </div>
                            </div>
                             <!-- Loot -->
                             <div class="p-3 hover:bg-slate-750 flex gap-3">
                                <div class="bg-yellow-900/50 p-2 rounded w-10 h-10 flex items-center justify-center text-yellow-400"><i class="fas fa-gem"></i></div>
                                <div>
                                    <h5 class="font-bold text-sm text-yellow-200" data-key="loc_loot">Treasures</h5>
                                    <p class="text-xs text-gray-400" data-key="loc_loot_desc">Golden Chests, Dice, and access to Expeditions.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mounts Section -->
        <div id="section-mounts" class="section-content">
            <h2 class="text-2xl text-yellow-400 mb-6 border-b border-gray-700 pb-2 pixel-font" data-key="mounts_title">Mounts</h2>
            
            <div class="bg-blue-900/20 p-4 rounded-lg mb-6 border border-blue-500/30 flex gap-4 items-start">
                <i class="fas fa-info-circle text-blue-400 text-xl mt-1"></i>
                <div>
                    <p class="text-sm text-gray-200" data-key="mounts_intro">Mounts provide massive <strong>CP</strong> boosts, speed up <strong>Day Progression</strong>, and fight in the <strong>Bar PVP</strong>.</p>
                    <p class="text-xs text-gray-400 mt-1" data-key="mounts_note">You must find Witches on the map to unlock the ability to purchase these.</p>
                </div>
            </div>

            <div class="overflow-hidden rounded-lg shadow-lg border border-gray-700">
                <table class="w-full text-left border-collapse bg-slate-800">
                    <thead>
                        <tr class="bg-slate-900 text-gray-400 text-xs uppercase tracking-wider border-b border-gray-700">
                            <th class="p-4" data-key="th_mount">Mount</th>
                            <th class="p-4" data-key="th_rarity">Rarity</th>
                            <th class="p-4" data-key="th_cost">Cost / Method</th>
                        </tr>
                    </thead>
                    <tbody class="text-sm divide-y divide-gray-700" id="mounts-table-body">
                        <!-- Populated by JS -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Pets Section (NEW) -->
        <div id="section-pets" class="section-content">
            <h2 class="text-2xl text-pink-400 mb-6 border-b border-gray-700 pb-2 pixel-font" data-key="pets_title">Pets</h2>
            
            <p class="mb-6 text-gray-300 text-sm bg-slate-800 p-3 rounded border-l-4 border-pink-500" data-key="pets_intro">
                Pets grant powerful passive abilities and significant stat bonuses, becoming essential companions in PVP. Click a pet's name for details.
            </p>

            <div id="pets-container" class="space-y-8">
                <!-- Pets populated by JS here -->
            </div>
        </div>
        
        <!-- World Boss Section -->
        <div id="section-boss" class="section-content">
            <div class="flex items-center justify-between mb-6">
                <h2 class="text-2xl text-red-500 pixel-font" data-key="boss_title">World Boss</h2>
                <div class="text-right">
                    <span class="block text-xs text-gray-400 uppercase tracking-widest">Unlock</span>
                    <span class="text-white font-mono font-bold">Day 666</span>
                </div>
            </div>

            <div class="grid md:grid-cols-3 gap-6">
                <!-- Info Card -->
                <div class="md:col-span-1 space-y-6">
                    <div class="card-glass p-6 rounded-xl border-t-4 border-red-600">
                        <h3 class="font-bold text-red-400 text-lg mb-4 flex items-center"><i class="far fa-clock mr-2"></i> <span data-key="boss_schedule">Schedule (UTC)</span></h3>
                        <ul class="space-y-3 text-sm text-gray-300">
                            <li class="flex justify-between border-b border-gray-700 pb-1"><span data-key="day_tue">Tuesday</span> <span class="font-mono text-white">21:00</span></li>
                            <li class="flex justify-between border-b border-gray-700 pb-1"><span data-key="day_thu">Thursday</span> <span class="font-mono text-white">21:00</span></li>
                            <li class="flex justify-between border-b border-gray-700 pb-1"><span data-key="day_sat">Saturday</span> <span class="font-mono text-white">21:00</span></li>
                        </ul>
                        <div class="mt-4 bg-red-900/20 p-3 rounded text-center">
                            <p class="text-xs text-red-300 uppercase font-bold mb-1" data-key="boss_duration_label">Duration</p>
                            <p class="text-xl font-bold text-white">30 Min</p>
                        </div>
                    </div>
                    
                    <div class="bg-slate-800 p-4 rounded-lg text-xs text-gray-400 border border-slate-700">
                        <p class="mb-2"><strong class="text-white" data-key="boss_reg_title">Registration:</strong> <span data-key="boss_reg_desc">Opens 24h prior. Grants a Golden Die.</span></p>
                        <p><strong class="text-white" data-key="boss_mech_title">Mechanic:</strong> <span data-key="boss_mech_desc">Damage = Hero CP. Higher CP gives better rank.</span></p>
                    </div>
                </div>

                <!-- Rewards Table -->
                <div class="md:col-span-2">
                    <div class="bg-slate-800 rounded-xl overflow-hidden border border-slate-700 h-full">
                        <div class="bg-slate-900 p-4 border-b border-slate-700">
                            <h3 class="font-bold text-yellow-400" data-key="boss_rewards">Ranking Rewards</h3>
                        </div>
                        <div class="p-4 space-y-2">
                            <!-- Rank 1 -->
                            <div class="flex items-center bg-gradient-to-r from-yellow-900/40 to-slate-800 p-3 rounded border border-yellow-700/30">
                                <div class="w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center text-black font-bold text-lg shadow-lg border-2 border-white mr-4">1</div>
                                <div>
                                    <div class="font-bold text-yellow-200">Champion</div>
                                    <div class="text-xs text-gray-400">150 Coins + 500 Horns</div>
                                </div>
                            </div>
                            <!-- Rank 2 -->
                            <div class="flex items-center bg-gradient-to-r from-gray-700/40 to-slate-800 p-3 rounded border border-gray-500/30">
                                <div class="w-10 h-10 bg-gray-400 rounded-full flex items-center justify-center text-black font-bold text-md shadow-lg border-2 border-white mr-4">2</div>
                                <div>
                                    <div class="font-bold text-gray-200">Runner-up</div>
                                    <div class="text-xs text-gray-400">150 Coins + 250 Horns</div>
                                </div>
                            </div>
                            <!-- Rank 3-10 -->
                            <div class="flex items-center bg-slate-800 p-3 rounded border border-slate-700">
                                <div class="w-8 h-8 bg-orange-700 rounded-full flex items-center justify-center text-white font-bold text-xs mr-4">3-10</div>
                                <div>
                                    <div class="font-bold text-orange-200">Top Ten</div>
                                    <div class="text-xs text-gray-400">150 Coins + 100 Horns</div>
                                </div>
                            </div>
                             <!-- Rank 11-100 -->
                             <div class="flex items-center bg-slate-800 p-3 rounded border border-slate-700 opacity-75">
                                <div class="w-8 h-8 bg-slate-700 rounded-full flex items-center justify-center text-gray-300 font-bold text-xs mr-4">11+</div>
                                <div>
                                    <div class="font-bold text-gray-400">Warrior</div>
                                    <div class="text-xs text-gray-500">75 Coins + 50 Horns</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Expeditions Section -->
        <div id="section-expeditions" class="section-content">
            <h2 class="text-2xl text-green-400 mb-6 border-b border-gray-700 pb-2 pixel-font" data-key="expeditions_title">Expeditions</h2>
            
            <p class="mb-6 text-gray-300 text-sm bg-slate-800 p-3 rounded border-l-4 border-purple-500" data-key="exp_intro_detail">
                Expeditions must be unlocked in order: <strong>Forest -> Snow -> Ocean</strong>. Unlocking a new expedition grants its specific "Tear Upgrade" to all previous zones as well.
            </p>

            <div class="grid lg:grid-cols-3 gap-6">
                <!-- Forest -->
                <div class="bg-slate-800 rounded-xl overflow-hidden border border-green-900 group hover:border-green-500 transition">
                    <div class="h-24 bg-green-900/50 flex items-center justify-center">
                        <i class="fas fa-tree text-4xl text-green-400 transform group-hover:scale-110 transition"></i>
                    </div>
                    <div class="p-5">
                        <div class="uppercase text-xs font-bold text-green-600 mb-1">Zone 1</div>
                        <h3 class="text-xl font-bold text-white mb-4" data-key="exp_forest">Forest</h3>
                        
                        <div class="bg-slate-900 p-3 rounded border border-slate-700">
                            <h4 class="text-sm font-bold text-green-400 mb-1" data-key="upgrade_forest">Two Days as One</h4>
                            <p class="text-xs text-gray-400 mb-2" data-key="upgrade_forest_desc">Chance to progress 2 days instead of 1.</p>
                            <div class="text-[10px] text-gray-500 uppercase font-bold flex justify-between">
                                <span>Max Lvl: 500</span>
                                <span class="text-green-500">25% Chance</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Snow -->
                <div class="bg-slate-800 rounded-xl overflow-hidden border border-cyan-900 group hover:border-cyan-500 transition">
                    <div class="h-24 bg-cyan-900/50 flex items-center justify-center">
                        <i class="fas fa-snowflake text-4xl text-cyan-400 transform group-hover:scale-110 transition"></i>
                    </div>
                    <div class="p-5">
                        <div class="uppercase text-xs font-bold text-cyan-600 mb-1">Zone 2</div>
                        <h3 class="text-xl font-bold text-white mb-4" data-key="exp_snow">Snow Mountain</h3>
                        
                        <div class="bg-slate-900 p-3 rounded border border-slate-700">
                            <h4 class="text-sm font-bold text-cyan-400 mb-1" data-key="upgrade_snow">Slow Digestion</h4>
                            <p class="text-xs text-gray-400 mb-2" data-key="upgrade_snow_desc">Increases duration of active items.</p>
                            <div class="text-[10px] text-gray-500 uppercase font-bold flex justify-between">
                                <span>Max Lvl: 500</span>
                                <span class="text-cyan-500">+100% Duration</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Ocean -->
                <div class="bg-slate-800 rounded-xl overflow-hidden border border-blue-900 group hover:border-blue-500 transition">
                    <div class="h-24 bg-blue-900/50 flex items-center justify-center">
                        <i class="fas fa-water text-4xl text-blue-400 transform group-hover:scale-110 transition"></i>
                    </div>
                    <div class="p-5">
                        <div class="uppercase text-xs font-bold text-blue-600 mb-1">Zone 3</div>
                        <h3 class="text-xl font-bold text-white mb-4" data-key="exp_ocean">Ocean</h3>
                        
                        <div class="bg-slate-900 p-3 rounded border border-slate-700">
                            <h4 class="text-sm font-bold text-blue-400 mb-1" data-key="upgrade_ocean">Bayblade</h4>
                            <p class="text-xs text-gray-400 mb-2" data-key="upgrade_ocean_desc">Deals % of Attack as Area Damage.</p>
                            <div class="text-[10px] text-gray-500 uppercase font-bold flex justify-between">
                                <span>Max Lvl: 1000</span>
                                <span class="text-blue-500">100% Damage</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Medal of Honor Section -->
        <div id="section-medal" class="section-content">
            <h2 class="text-2xl text-yellow-500 mb-6 border-b border-gray-700 pb-2 pixel-font" data-key="medal_title">Medal of Honor</h2>
            
            <div class="grid lg:grid-cols-12 gap-6">
                <!-- Info Left -->
                <div class="lg:col-span-4 bg-gradient-to-b from-yellow-900/20 to-slate-800 p-6 rounded-xl border border-yellow-700 text-center">
                    <div class="w-20 h-20 bg-yellow-500 mx-auto rounded-full flex items-center justify-center text-4xl shadow-lg border-4 border-yellow-200 mb-4 animate-bounce">
                        <i class="fas fa-crown text-yellow-900"></i>
                    </div>
                    <h3 class="text-xl font-bold text-yellow-400 mb-2" data-key="medal_concept">Supporter Rank</h3>
                    <p class="text-sm text-gray-300 mb-6" data-key="medal_desc">
                        Every purchase grants <strong>Honor Points</strong>. Climbing the 9 levels of honor grants prestige and rewards.
                    </p>
                    <div class="bg-black/40 p-3 rounded text-xs font-mono text-yellow-200">
                        1 Currency Unit â‰ˆ 1 Point
                    </div>
                </div>

                <!-- Levels & Points (Right) -->
                <div class="lg:col-span-8 space-y-6">
                    <!-- Levels Grid -->
                    <div class="bg-slate-800 rounded-lg p-5 border border-slate-700">
                        <h4 class="font-bold text-white mb-4 flex items-center"><i class="fas fa-list-ol mr-2 text-gray-500"></i> <span data-key="medal_levels">Honor Levels</span></h4>
                        <div class="grid grid-cols-3 sm:grid-cols-5 gap-3">
                            <div class="bg-slate-700 p-2 rounded text-center border border-slate-600">
                                <span class="block text-[10px] text-gray-400 uppercase">Lvl 1</span>
                                <span class="text-yellow-400 font-bold">4</span>
                            </div>
                            <div class="bg-slate-700 p-2 rounded text-center border border-slate-600">
                                <span class="block text-[10px] text-gray-400 uppercase">Lvl 2</span>
                                <span class="text-yellow-400 font-bold">14</span>
                            </div>
                            <div class="bg-slate-700 p-2 rounded text-center border border-slate-600">
                                <span class="block text-[10px] text-gray-400 uppercase">Lvl 3</span>
                                <span class="text-yellow-400 font-bold">29</span>
                            </div>
                            <div class="bg-slate-700 p-2 rounded text-center border border-slate-600">
                                <span class="block text-[10px] text-gray-400 uppercase">Lvl 4</span>
                                <span class="text-yellow-400 font-bold">100</span>
                            </div>
                            <div class="bg-slate-700 p-2 rounded text-center border border-slate-600">
                                <span class="block text-[10px] text-gray-400 uppercase">Lvl 5</span>
                                <span class="text-yellow-400 font-bold">500</span>
                            </div>
                            <div class="bg-slate-700 p-2 rounded text-center border border-slate-600">
                                <span class="block text-[10px] text-gray-400 uppercase">Lvl 6</span>
                                <span class="text-yellow-400 font-bold">1k</span>
                            </div>
                            <div class="bg-slate-700 p-2 rounded text-center border border-slate-600">
                                <span class="block text-[10px] text-gray-400 uppercase">Lvl 7</span>
                                <span class="text-yellow-400 font-bold">2k</span>
                            </div>
                            <div class="bg-slate-700 p-2 rounded text-center border border-slate-600">
                                <span class="block text-[10px] text-gray-400 uppercase">Lvl 8</span>
                                <span class="text-yellow-400 font-bold">5k</span>
                            </div>
                            <div class="bg-slate-700 p-2 rounded text-center border border-slate-600">
                                <span class="block text-[10px] text-gray-400 uppercase">Lvl 9</span>
                                <span class="text-yellow-400 font-bold">10k</span>
                            </div>
                        </div>
                    </div>

                    <!-- Purchase Values -->
                    <div class="bg-slate-800 rounded-lg p-5 border border-slate-700">
                         <h4 class="font-bold text-white mb-4 flex items-center"><i class="fas fa-shopping-cart mr-2 text-gray-500"></i> <span data-key="medal_examples">Point Values</span></h4>
                         <div class="grid sm:grid-cols-2 gap-4 text-sm">
                            <div class="flex justify-between border-b border-gray-700 pb-1"><span>Ad Remover</span> <span class="text-green-400 font-mono">120 pts</span></div>
                            <div class="flex justify-between border-b border-gray-700 pb-1"><span>Hidden Treasure</span> <span class="text-green-400 font-mono">500 pts</span></div>
                            <div class="flex justify-between border-b border-gray-700 pb-1"><span>12,000 Coins</span> <span class="text-green-400 font-mono">190 pts</span></div>
                            <div class="flex justify-between border-b border-gray-700 pb-1"><span>6,000 Coins</span> <span class="text-green-400 font-mono">110 pts</span></div>
                            <div class="flex justify-between border-b border-gray-700 pb-1"><span>2,000 Coins</span> <span class="text-green-400 font-mono">40 pts</span></div>
                            <div class="flex justify-between border-b border-gray-700 pb-1"><span>450 Coins</span> <span class="text-green-400 font-mono">10 pts</span></div>
                            <div class="flex justify-between border-b border-gray-700 pb-1"><span>80 Coins</span> <span class="text-green-400 font-mono">5 pts</span></div>
                         </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Forum Section -->
        <div id="section-forum" class="section-content">
            <h2 class="text-2xl text-purple-400 mb-6 border-b border-gray-700 pb-2 pixel-font" data-key="forum_title">Community Forum</h2>
            
            <div class="grid md:grid-cols-3 gap-6 h-[600px]">
                <!-- Chat Window -->
                <div id="forum-container" class="md:col-span-2 bg-slate-900 rounded-lg border border-slate-700 flex flex-col h-full shadow-2xl relative overflow-hidden">
                    <!-- Status Bar -->
                    <div class="bg-slate-800 px-4 py-2 text-xs flex justify-between items-center border-b border-slate-700">
                        <span class="font-bold text-gray-400" data-key="forum_recent">Live Feed</span>
                        <span id="chat-status" class="text-yellow-500"><i class="fas fa-circle-notch fa-spin mr-1"></i> Checking service...</span>
                    </div>

                    <div id="forum-posts" class="flex-grow overflow-y-auto p-4 custom-scroll space-y-3">
                        <!-- Posts injected here or disabled message -->
                    </div>
                    
                    <!-- Post Form -->
                    <div class="p-4 bg-slate-800 border-t border-slate-700">
                        <div class="flex flex-col gap-2">
                            <input type="text" id="forum-name" class="bg-slate-700 border border-slate-600 text-white text-sm rounded p-2 focus:outline-none focus:border-purple-500 placeholder-gray-500" placeholder="Hero Name (Optional)">
                            <div class="flex gap-2">
                                <textarea id="forum-message" class="bg-slate-700 border border-slate-600 text-white text-sm rounded p-2 flex-grow focus:outline-none focus:border-purple-500 resize-none h-12 placeholder-gray-500" placeholder="Type your message..."></textarea>
                                <button id="btn-submit" type="button" onclick="submitPost()" class="bg-purple-600 hover:bg-purple-500 text-white px-6 rounded font-bold transition shadow-lg border-b-4 border-purple-800 active:border-b-0 active:translate-y-1">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Guidelines -->
                <div class="md:col-span-1 space-y-4">
                    <div class="bg-slate-800 p-5 rounded-lg border border-slate-600">
                        <h4 class="font-bold text-white mb-4 border-b border-gray-600 pb-2" data-key="forum_rules_title">Rules</h4>
                        <ul class="list-disc list-inside text-xs text-gray-400 space-y-2">
                            <li data-key="forum_rule_1">Be respectful to other heroes.</li>
                            <li data-key="forum_rule_2">No spamming potions.</li>
                            <li data-key="forum_rule_3">Help newbies with tips.</li>
                        </ul>
                    </div>
                    <!-- VERIFIED DISCORD LINK WITH target="_blank" -->
                    <a href="https://discord.gg/ZN4Gn7fWFu" target="_blank" class="block bg-[#5865F2] hover:bg-[#4752c4] p-4 rounded-lg text-white text-center transition shadow-lg group">
                        <i class="fab fa-discord text-4xl mb-2 group-hover:scale-110 transition duration-300"></i>
                        <p class="text-sm font-bold">Join Discord</p>
                    </a>
                </div>
            </div>
        </div>

    </main>

    <footer class="bg-slate-900 py-6 text-center text-xs text-gray-600 border-t border-slate-800 mt-auto">
        <p>Hero Hero Clicker Fan Wiki. Content &copy; 2025.</p>
    </footer>

    <!-- Pet Detail Modal/Tooltip (Hidden by Default) -->
    <div id="pet-detail-modal" class="fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 w-11/12 max-w-sm hidden" onclick="hidePetDetails()">
        <div class="bg-slate-900 p-6 rounded-xl border-4 shadow-2xl relative border-pink-500/50">
            <button class="absolute top-2 right-2 text-gray-400 hover:text-white transition" onclick="hidePetDetails()">
                <i class="fas fa-times-circle text-xl"></i>
            </button>
            <div class="text-center mb-4">
                <i id="pet-modal-icon" class="text-4xl mb-2"></i>
                <h3 id="pet-modal-name" class="text-2xl font-bold"></h3>
                <span id="pet-modal-rarity" class="inline-block px-3 py-1 text-xs font-mono rounded-full mt-1 uppercase font-bold"></span>
            </div>
            
            <div class="space-y-4">
                <div class="bg-slate-800 p-3 rounded border border-slate-700">
                    <p class="text-sm font-bold text-yellow-400 flex items-center mb-1"><i class="fas fa-bolt mr-2"></i> <span id="pet-modal-passive"></span></p>
                    <p id="pet-modal-desc" class="text-xs text-gray-300"></p>
                </div>
                
                <div class="grid grid-cols-2 gap-3 text-center text-xs bg-slate-800 p-3 rounded border border-slate-700">
                    <div>
                        <p class="text-gray-400 font-bold mb-1">Level 25 Bonus</p>
                        <p id="pet-modal-lvl25" class="font-mono text-green-400"></p>
                    </div>
                    <div>
                        <p class="text-gray-400 font-bold mb-1">Level 50 Bonus</p>
                        <p id="pet-modal-lvl50" class="font-mono text-cyan-400"></p>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Translations & Logic -->
    <script>
        // Mount Data
        const mountsData = [
            { name: "Peco Peco", rarity: "normal", cost: "550 Coins" },
            { name: "Javali", rarity: "normal", cost: "500 Coins" },
            { name: "Charlotte", rarity: "rare", cost: "1,300 Coins" },
            { name: "Princes's Horse", rarity: "rare", cost: "1,200 Coins" },
            { name: "Cart Titan", rarity: "rare", cost: "Forest Bundle" },
            { name: "Nimbus", rarity: "super_rare", cost: "Reach 8,000 CP" },
            { name: "Unicorn", rarity: "super_rare", cost: "2,200 Coins" },
            { name: "Chimera", rarity: "super_rare", cost: "2,200 Coins" },
            { name: "Cerberus", rarity: "ultra_rare", cost: "5,500 Coins" },
            { name: "Shark", rarity: "ultra_rare", cost: "Witch Package" },
            { name: "Boulder", rarity: "ultra_rare", cost: "5,200 Coins" },
            { name: "Ancient Dragon", rarity: "legendary", cost: "15,000 Coins" },
            { name: "Monarch", rarity: "legendary", cost: "12,000 Coins" }
        ];

        // PET DATA (New)
        const petsData = [
            // Common
            { name: "BLUSHY", rarity: "Common", passive: "Determination", passive_desc: "Whenever you Staunch a Bleeding, your HP Regen increases by 10%.", lvl25: "+1% Staunch", lvl50: "+100 HP Regen", icon: "fas fa-heart" },
            { name: "WORM", rarity: "Common", passive: "Bite", passive_desc: "Increases the chance to apply Bleeding by 5%.", lvl25: "+1% Apply Bleeding", lvl50: "+3% Apply Bleeding", icon: "fas fa-worm" },
            { name: "JELLY-FISH", rarity: "Common", passive: "Controlled Flow", passive_desc: "Increases Staunch by 5%.", lvl25: "+1% Staunch", lvl50: "+3% Staunch", icon: "fas fa-water" },
            { name: "SHELDON", rarity: "Common", passive: "Protector", passive_desc: "Increases Defense by 5%", lvl25: "+1% Defense", lvl50: "+3% Defense", icon: "fas fa-shield-alt" },
            { name: "OCTOPUSY", rarity: "Common", passive: "Sturdy", passive_desc: "Increases max HP by 5%.", lvl25: "+200 HP", lvl50: "+600 HP", icon: "fas fa-bahai" },
            { name: "BAIACUZIN", rarity: "Common", passive: "Swollen", passive_desc: "Increases HP Regen by 20%.", lvl25: "+20 HP Regen", lvl50: "+100 HP Regen", icon: "fas fa-lungs" },
            { name: "APPA", rarity: "Common", passive: "Untouchable", passive_desc: "Increases Dodge by 5%", lvl25: "+1% Dodge", lvl50: "+2% Dodge", icon: "fas fa-wind" },
            // Uncommon
            { name: "IRS", rarity: "Uncommon", passive: "Income Tax", passive_desc: "When winning a PVP battle, there's a 10% chance to gain 20 Gold Coins and a 1% chance to gain 100 Gold Coins.", lvl25: "+40 HP Regen", lvl50: "+700 HP", icon: "fas fa-sack-dollar" },
            { name: "ADHD", rarity: "Uncommon", passive: "One Neuron", passive_desc: "If HP is below 50%, gain +10% Crit Chance for 5 turns.", lvl25: "+10 Min Damage", lvl50: "+2% Crit Chance", icon: "fas fa-brain" },
            { name: "CHOMPY", rarity: "Uncommon", passive: "Headbutt", passive_desc: "Increases the hero's Counter-Attack by 5%.", lvl25: "+2% Counter-Attack", lvl50: "+3% Counter-Attack", icon: "fas fa-tooth" },
            { name: "DEVIMON", rarity: "Uncommon", passive: "Reckless Vitality", passive_desc: "Increases HP Regen by 40%, but you can no longer Defend.", lvl25: "+1.5% Dodge", lvl50: "+2% Crit Chance", icon: "fas fa-fire-alt" },
            { name: "CACTURINO", rarity: "Uncommon", passive: "Earth's Breath", passive_desc: "If HP is below 25%, gain +25% Staunch.", lvl25: "+2% Staunch", lvl50: "+150 HP Regen", icon: "fas fa-cactus" },
            { name: "PARMALAT", rarity: "Uncommon", passive: "Lazy", passive_desc: "Increases Hp by 40%, but you can no longer Dodge.", lvl25: "+300 HP", lvl50: "+900 HP", icon: "fas fa-bed" },
            { name: "TRAP", rarity: "Uncommon", passive: "Bleeding", passive_desc: "Crit Attacks have an additional 15% chance to apply Bleeding.", lvl25: "+1% Crit Chance", lvl50: "+0.1 Crit Damage", icon: "fas fa-flask" },
            // Epic
            { name: "GHASLY", rarity: "Epic", passive: "Mirror", passive_desc: "Whenever you Defend, reflect 100% of the Damage received.", lvl25: "+15 Max Damage", lvl50: "+3% Defense", icon: "fas fa-ghost" },
            { name: "GEOFIRE", rarity: "Epic", passive: "Boulder", passive_desc: "Your 4th attack has a 20% chance to apply Burn (Burn reduces all healing by 50%).", lvl25: "+3% Counter-Attack", lvl50: "+5% Staunch", icon: "fas fa-globe-europe" },
            { name: "MAMACITO", rarity: "Epic", passive: "Furious", passive_desc: "For each attack in sequence, Crit Chance increases by 2%.", lvl25: "+2% Dodge", lvl50: "+15 Max Damage", icon: "fas fa-mask" },
            { name: "PELUCITO", rarity: "Epic", passive: "Patchwork", passive_desc: "Whenever you Defend, recover between 3% and 5% of your HP.", lvl25: "+2% Defense", lvl50: "+3.5% Defense", icon: "fas fa-socks" },
            { name: "SWOIRD", rarity: "Epic", passive: "Butcher", passive_desc: "Increases the chance to apply Laceration by 1%.", lvl25: "+0.5% Laceration", lvl50: "+1% Laceration", icon: "fas fa-dagger" },
            { name: "RIMURU", rarity: "Epic", passive: "Vital Touch", passive_desc: "Whenever performing any type of healing, increase that healing by 5%.", lvl25: "+60 HP Regen", lvl50: "+1.000 HP", icon: "fas fa-lungs" },
            { name: "UNKNOWY", rarity: "Epic", passive: "Mimic", passive_desc: "When suffering Laceration, there's a 15% to 25% chance to reflect and apply Laceration to the enemy as well (Reflect does not Counter-Attack).", lvl25: "+2% Counter-Attack", lvl50: "+1% Laceration", icon: "fas fa-eye" },
            // Mythic
            { name: "CATYUUBI", rarity: "Mythic", passive: "Vampirism", passive_desc: "Whenever the enemy loses HP from Bleeding, you recover 20% of that value in HP.", lvl25: "+3% Apply Bleeding", lvl50: "+5% Apply Bleeding", icon: "fas fa-cat" },
            { name: "GROOTY", rarity: "Mythic", passive: "Wall", passive_desc: "Whenever you Defend, your Defense increases by 2%.", lvl25: "+700 HP", lvl50: "+5% Defense", icon: "fas fa-tree" },
            { name: "IGNASS", rarity: "Mythic", passive: "Explosion", passive_desc: "On the first attack of each turn, your Critical Chance increases by 20%.", lvl25: "+3% Crit Chance", lvl50: "+25 Max Damage", icon: "fas fa-meteor" },
            { name: "FOOXY", rarity: "Mythic", passive: "Cold Analysis", passive_desc: "Increases the Damage of your next attack by 30% every time you Dodge.", lvl25: "+3% Dodge", lvl50: "+4% Crit Chance", icon: "fas fa-paw" },
            { name: "GHOSTRING", rarity: "Mythic", passive: "Vanish", passive_desc: "Whenever you Dodge, your Dodge increases by 1%.", lvl25: "+3% Dodge", lvl50: "+3% Dodge", icon: "fas fa-ghost" },
            { name: "REAPER", rarity: "Mythic", passive: "Drain", passive_desc: "Whenever you apply Bleeding, recover 20% of the Damage dealt.", lvl25: "+1% Laceration", lvl50: "+25 Max Damage", icon: "fas fa-scythe" },
            // Demoniac
            { name: "UMBREUN", rarity: "Demoniac", passive: "Relentless", passive_desc: "Whenever you Counter-Attack, your Critical Chance increases by 30%.", lvl25: "+5% Counter-Attack", lvl50: "+50 Min Damage", icon: "fas fa-fist-raised" },
            { name: "DARKHOLDER", rarity: "Demoniac", passive: "Hostility", passive_desc: "For each Crit Attack, your Crit Damage increases by 10%.", lvl25: "+4% Crit Chance", lvl50: "+6% Crit Chance", icon: "fas fa-dragon" },
            { name: "D.DRAGON", rarity: "Demoniac", passive: "Dragon Soul", passive_desc: "For every 20% of HP lost, your Damage increases by 10% but your Dodge decreases by 5%.", lvl25: "+50 Max Damage", lvl50: "+0.3 Crit Damage", icon: "fas fa-heart-crack" },
            // Divine
            { name: "ESPYON", rarity: "Divine", passive: "Sabotage", passive_desc: "When suffering Laceration, perform a Counter-Attack dealing 2x Damage and increase Crit Chance by 10%.", lvl25: "+5% Defense", lvl50: "+5% Dodge", icon: "fas fa-crown" },
            { name: "SOLARION", rarity: "Divine", passive: "Laser Beam", passive_desc: "Whenever you apply Laceration, it deals Damage equal to 5% of the enemy's max HP and increases your chance to apply Laceration by 1%.", lvl25: "+5% Staunch", lvl50: "+3% Laceration", icon: "fas fa-sun" },
            { name: "KIZARU", rarity: "Divine", passive: "Resurge", passive_desc: "When receiving Damage that would kill the hero, recover HP equal to the Damage received.", lvl25: "+1.500 HP", lvl50: "+5% Dodge", icon: "fas fa-bolt" },
            // Primordial
            { name: "FALLEN KING", rarity: "Primordial", passive: "Conqueror", passive_desc: "Now the Legendary Ability: Domain Expansion increases its effect by an additional 10%.", lvl25: "+2.500 HP", lvl50: "+100 Max Damage", icon: "fas fa-chess-king" },
            { name: "BESTIAL", rarity: "Primordial", passive: "Savage Instinct", passive_desc: "Now the Legendary Ability: Kaioken lasts for 2 turns instead of 1 turn.", lvl25: "+5% Crit Chance", lvl50: "+7% Apply Bleeding", icon: "fas fa-fire-lightning" },
            { name: "FOUNDING TITAN", rarity: "Primordial", passive: "Coordinate", passive_desc: "Now the Legendary Skill: Giant can deal Crit Damage.", lvl25: "+70 Max Damage", lvl50: "+70 Min Damage", icon: "fas fa-mountain" },
            { name: "WEZAEMON", rarity: "Primordial", passive: "Unyielding Spirit", passive_desc: "Increases the Base Damage of the Legendary Ability: Mitsurugi-ryu by 15%, and its last attack has a 100% chance to apply Bleeding.", lvl25: "+2% Laceration", lvl50: "+7% Dodge", icon: "fas fa-swords" },
        ];
        
        // Rarity classes map
        const rarityClasses = {
            "Common": { bg: "bg-gray-700/50 border-gray-600", text: "text-gray-300", icon: "text-gray-400" },
            "Uncommon": { bg: "bg-green-800/50 border-green-600", text: "text-green-300", icon: "text-green-400" },
            "Epic": { bg: "bg-blue-800/50 border-blue-600", text: "text-blue-300", icon: "text-blue-400" },
            "Mythic": { bg: "bg-purple-800/50 border-purple-600", text: "text-purple-300", icon: "text-purple-400" },
            "Demoniac": { bg: "bg-red-800/50 border-red-600", text: "text-red-300", icon: "text-red-400" },
            "Divine": { bg: "bg-yellow-800/50 border-yellow-600", text: "text-yellow-300", icon: "text-yellow-400" },
            "Primordial": { bg: "bg-pink-800/50 border-pink-600", text: "text-pink-300", icon: "text-pink-400" }
        };

        // Dictionary
        const translations = {
            en: {
                nav_map: "Map", nav_mounts: "Mounts", nav_pets: "Pets", nav_boss: "World Boss", nav_expeditions: "Expeditions", nav_medal: "Honor",
                
                // Map
                map_title: "Kingdom Map",
                map_req_tag: "Req: Day 1,000",
                map_img_caption: "The Continent of Grimar - 124 Territories",
                map_overview: "Overview",
                map_desc_long: "Unlocked when the hero reaches <strong>Day 1,000</strong>. Use <strong>Horns</strong> to conquer the 124 distinct territories. This is the core mid-game progression system.",
                map_locations: "Territory Types",
                loc_build: "Building Improvement",
                loc_build_desc: "Begin construction at higher levels instantly after rebirth.",
                loc_attack: "Hero Attack",
                loc_attack_desc: "Boosts Attack, Critical, Hit Kill, and Boss Damage.",
                loc_pick: "Automatic Pickaxes",
                loc_pick_desc: "Counts as a click from the Naked Dwarf automatically.",
                loc_witch: "Witches",
                loc_witch_desc: "Unlocks Mounts in store. Sells special UR Mount packages.",
                loc_loot: "Treasures",
                loc_loot_desc: "Golden Chests, Dice, and Expeditions.",

                // Mounts
                mounts_title: "Mounts",
                mounts_intro: "Mounts provide massive <strong>CP</strong> boosts, speed up <strong>Day Progression</strong>, and fight in the <strong>Bar PVP</strong>.",
                mounts_note: "Unlock by finding Witches on the map.",
                th_mount: "Mount", th_rarity: "Rarity", th_cost: "Cost/Method",
                rarity_normal: "Normal", rarity_rare: "Rare", rarity_super_rare: "Super Rare", rarity_ultra_rare: "Ultra Rare", rarity_legendary: "Legendary",

                // Pets (NEW)
                pets_title: "Pets",
                pets_intro: "Pets grant powerful passive abilities and significant stat bonuses, becoming essential companions in PVP. Click a pet's name for details.",
                
                // Boss
                boss_title: "World Boss",
                boss_schedule: "Schedule (UTC)",
                day_tue: "Tuesday", day_thu: "Thursday", day_sat: "Saturday",
                boss_duration_label: "Duration",
                boss_reg_title: "Registration:", boss_reg_desc: "Opens 24h prior. Grants a Golden Die.",
                boss_mech_title: "Mechanic:", boss_mech_desc: "Damage = Hero CP. Higher CP gives better rank.",
                boss_rewards: "Ranking Rewards",

                // Expeditions
                expeditions_title: "Expeditions",
                exp_intro_detail: "Expeditions must be unlocked in order: <strong>Forest -> Snow -> Ocean</strong>. Unlocking a new expedition grants its specific 'Tear Upgrade' to all previous zones as well.",
                exp_forest: "Forest", upgrade_forest: "Two Days as One", upgrade_forest_desc: "Chance to progress 2 days instead of 1.",
                exp_snow: "Snow Mountain", upgrade_snow: "Slow Digestion", upgrade_snow_desc: "Increases duration of active items.",
                exp_ocean: "Ocean", upgrade_ocean: "Bayblade", upgrade_ocean_desc: "Deals % of Attack as Area Damage.",

                // Medal
                medal_title: "Medal of Honor",
                medal_concept: "Supporter Rank",
                medal_desc: "Every purchase grants <strong>Honor Points</strong>. Climbing the 9 levels of honor grants prestige and rewards.",
                medal_levels: "Honor Levels",
                medal_examples: "Point Values",

                // Forum
                forum_title: "Community Forum",
                forum_recent: "Live Feed",
                forum_rules_title: "Rules",
                forum_rule_1: "Be respectful to other heroes.",
                forum_rule_2: "No spamming potions.",
                forum_rule_3: "Help newbies with tips."
            },
            es: {
                nav_map: "Mapa", nav_mounts: "Monturas", nav_pets: "Mascotas", nav_boss: "Jefe Mundial", nav_expeditions: "Expediciones", nav_medal: "Honor",
                
                map_title: "Mapa del Reino",
                map_req_tag: "Req: DÃ­a 1,000",
                map_img_caption: "Continente de Grimar - 124 Territorios",
                map_overview: "Resumen",
                map_desc_long: "Se desbloquea en el <strong>DÃ­a 1,000</strong>. Usa <strong>Cuernos</strong> para conquistar 124 territorios. Sistema central del juego medio.",
                map_locations: "Tipos de Territorio",
                loc_build: "Mejora de ConstrucciÃ³n",
                loc_build_desc: "Inicia la construcciÃ³n en niveles altos tras renacer.",
                loc_attack: "Ataque del HÃ©roe",
                loc_attack_desc: "Aumenta Ataque, CrÃ­tico, Muerte InstantÃ¡nea y DaÃ±o al Jefe.",
                loc_pick: "Picos AutomÃ¡ticos",
                loc_pick_desc: "Cuentan como clics automÃ¡ticos del Enano Desnudo.",
                loc_witch: "Brujas",
                loc_witch_desc: "Desbloquea Monturas en tienda. Venden paquetes UR.",
                loc_loot: "Tesoros",
                loc_loot_desc: "Cofres Dorados, Dados y Expediciones.",

                mounts_title: "Monturas",
                mounts_intro: "Las monturas dan <strong>CP</strong> masivo, aceleran los <strong>DÃ­as</strong> y luchan en el <strong>Bar PVP</strong>.",
                mounts_note: "Desbloquea encontrando Brujas en el mapa.",
                th_mount: "Montura", th_rarity: "Rareza", th_cost: "Costo/MÃ©todo",
                rarity_normal: "Normal", rarity_rare: "Raro", rarity_super_rare: "Super Raro", rarity_ultra_rare: "Ultra Raro", rarity_legendary: "Lendario",

                // Pets (NEW)
                pets_title: "Mascotas",
                pets_intro: "Las mascotas otorgan poderosas habilidades pasivas y bonificaciones de estadÃ­sticas significativas, siendo compaÃ±eros esenciales en PVP. Haz clic en el nombre de una mascota para ver los detalles.",

                // Boss
                boss_title: "Jefe Mundial",
                boss_schedule: "Horarios (UTC)",
                day_tue: "Martes", day_thu: "Jueves", day_sat: "SÃ¡bado",
                boss_duration_label: "DuraciÃ³n",
                boss_reg_title: "Registro:", boss_reg_desc: "Abre 24h antes. Otorga un Dado Dorado.",
                boss_mech_title: "MecÃ¡nica:", boss_mech_desc: "DaÃ±o = CP del HÃ©roe. Mayor CP = Mejor Rango.",
                boss_rewards: "Recompensas",

                // Expeditions
                expeditions_title: "Expediciones",
                exp_intro_detail: "Deben desbloquearse en orden: <strong>Bosque -> Nieve -> OcÃ©ano</strong>. Cada una desbloquea su 'Mejora de LÃ¡grima' para todas las zonas.",
                exp_forest: "Bosque", upgrade_forest: "Dos DÃ­as como Uno", upgrade_forest_desc: "Probabilidad de pasar 2 dÃ­as en vez de 1.",
                exp_snow: "Nieve", upgrade_snow: "DigestiÃ³n Lenta", upgrade_snow_desc: "Aumenta la duraciÃ³n de objetos activos.",
                exp_ocean: "OcÃ©ano", upgrade_ocean: "Bayblade", upgrade_ocean_desc: "Hace % de Ataque como DaÃ±o en Ãrea.",

                // Medal
                medal_title: "Medalla de Honor",
                medal_concept: "Rango de Apoyo",
                medal_desc: "Cada compra da <strong>Puntos de Honor</strong>. Sube 9 niveles para prestigio y premios.",
                medal_levels: "Niveles de Honor",
                medal_examples: "Valores de Puntos",

                // Forum
                forum_title: "Foro Comunidad",
                forum_recent: "Chat en Vivo",
                forum_rules_title: "Reglas",
                forum_rule_1: "SÃ© respetuoso.",
                forum_rule_2: "No spam.",
                forum_rule_3: "Ayuda a los nuevos."
            },
            pt: {
                nav_map: "Mapa", nav_mounts: "Montarias", nav_pets: "Pets", nav_boss: "Chefe Mundial", nav_expeditions: "ExpediÃ§Ãµes", nav_medal: "Honra",
                
                map_title: "Mapa do Reino",
                map_req_tag: "Req: Dia 1.000",
                map_img_caption: "Continente de Grimar - 124 TerritÃ³rios",
                map_overview: "VisÃ£o Geral",
                map_desc_long: "Desbloqueado no <strong>Dia 1.000</strong>. Use <strong>Chifres</strong> para conquistar 124 territÃ³rios. Essencial para o meio do jogo.",
                map_locations: "Tipos de TerritÃ³rio",
                loc_build: "Melhoria de ConstruÃ§Ã£o",
                loc_build_desc: "Inicia construÃ§Ã£o em nÃ­veis mais altos apÃ³s renascer.",
                loc_attack: "Ataque do HerÃ³i",
                loc_attack_desc: "Aumenta Ataque, CrÃ­tico, Hit Kill e Dano no Chefe.",
                loc_pick: "Picaretas AutomÃ¡ticas",
                loc_pick_desc: "Conta como clique automÃ¡tico do AnÃ£o Pelado.",
                loc_witch: "Bruxas",
                loc_witch_desc: "Libera Montarias na loja. Vende pacotes UR especiais.",
                loc_loot: "Tesouros",
                loc_loot_desc: "BaÃºs Dourados, Dados e ExpediÃ§Ãµes.",

                mounts_title: "Montarias",
                mounts_intro: "Montarias dÃ£o <strong>CP</strong> massivo, aceleram os <strong>DÃ­as</strong> e lutam no <strong>Bar PVP</strong>.",
                mounts_note: "Desbloqueia encontrando Bruxas no mapa.",
                th_mount: "Montaria", th_rarity: "Raridade", th_cost: "Custo/MÃ©todo",
                rarity_normal: "Normal", rarity_rare: "Raro", rarity_super_rare: "Super Raro", rarity_ultra_rare: "Ultra Raro", rarity_legendary: "LendÃ¡rio",

                // Pets (NEW)
                pets_title: "Pets",
                pets_intro: "Pets concedem poderosas habilidades passivas e bÃ´nus de status significativos, tornando-se companheiros essenciais no PVP. Clique no nome de um pet para ver os detalhes.",

                // Boss
                boss_title: "Chefe Mundial",
                boss_schedule: "HorÃ¡rios (UTC)",
                day_tue: "TerÃ§a-feira", day_thu: "Quinta-feira", day_sat: "SÃ¡bado",
                boss_duration_label: "DuraÃ§Ã£o",
                boss_reg_title: "Registro:", boss_reg_desc: "Abre 24h antes. Concede um Dado Dourado.",
                boss_mech_title: "MecÃ¢nica:", boss_mech_desc: "Dano = CP do HerÃ³i. CP mais alto = Melhor Rank.",
                boss_rewards: "Recompensas",

                // Expeditions
                expeditions_title: "ExpediÃ§Ãµes",
                exp_intro_detail: "Devem ser desbloqueadas em ordem: <strong>Floresta -> Neve -> Oceano</strong>. Desbloquear uma nova expediÃ§Ã£o concede sua 'Melhoria de LÃ¡grima' a todas as zonas anteriores.",
                exp_forest: "Floresta", upgrade_forest: "Dois Dias como Um", upgrade_forest_desc: "Chance de avanÃ§ar 2 dias em vez de 1.",
                exp_snow: "Montanha de Neve", upgrade_snow: "DigestÃ£o Lenta", upgrade_snow_desc: "Aumenta a duraÃ§Ã£o de itens ativos.",
                exp_ocean: "Oceano", upgrade_ocean: "Bayblade", upgrade_ocean_desc: "Causa % de Ataque como Dano em Ãrea.",

                // Medal
                medal_title: "Medalha de Honra",
                medal_concept: "Rank de Apoiador",
                medal_desc: "Cada compra concede <strong>Pontos de Honra</strong>. Subir os 9 nÃ­veis de honra concede prestÃ­gio e recompensas.",
                medal_levels: "NÃ­veis de Honra",
                medal_examples: "Valores de Pontos",

                // Forum
                forum_title: "FÃ³rum da Comunidade",
                forum_recent: "Feed Ao Vivo",
                forum_rules_title: "Reglas",
                forum_rule_1: "Seja respeitoso com outros herÃ³is.",
                forum_rule_2: "NÃ£o faÃ§a spam de poÃ§Ãµes.",
                forum_rule_3: "Ajude os novatos com dicas."
            }
        };

        // Current state
        let currentLang = 'en';

        // --- Core UI Functions ---
        function setLang(lang) {
            currentLang = lang;
            
            // Buttons
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('text-white', 'underline'));
            document.getElementById('btn-' + lang).classList.add('text-white', 'underline');

            // Text
            document.querySelectorAll('[data-key]').forEach(el => {
                const key = el.getAttribute('data-key');
                if (translations[lang][key]) {
                    el.innerHTML = translations[lang][key];
                }
            });

            // Re-render sections
            renderMounts();
            renderPets();
        }

        function showSection(sectionId) {
            document.querySelectorAll('.nav-item').forEach(btn => btn.classList.remove('active'));
            const navBtn = document.querySelector(`button[data-key="nav_${sectionId}"]`);
            if (navBtn) navBtn.classList.add('active');

            document.querySelectorAll('.section-content').forEach(div => div.classList.remove('active'));
            document.getElementById('section-' + sectionId).classList.add('active');
            
            // Hide the modal when switching sections
            hidePetDetails();
        }

        // --- Mounts Logic ---
        function renderMounts() {
            const tbody = document.getElementById('mounts-table-body');
            tbody.innerHTML = '';

            mountsData.forEach((mount, index) => {
                const tr = document.createElement('tr');
                tr.className = index % 2 === 0 ? "bg-slate-800 hover:bg-slate-700 transition" : "bg-slate-800/50 hover:bg-slate-700 transition";
                
                let rarityClass = "text-gray-300";
                if(mount.rarity === "rare") rarityClass = "text-blue-400 font-bold";
                if(mount.rarity === "super_rare") rarityClass = "text-purple-400 font-bold";
                if(mount.rarity === "ultra_rare") rarityClass = "text-red-400 font-bold";
                if(mount.rarity === "legendary") rarityClass = "text-yellow-400 font-extrabold";

                const rarityText = translations[currentLang]['rarity_' + mount.rarity] || mount.rarity;
                
                tr.innerHTML = `
                    <td class="p-4 font-bold text-white">${mount.name}</td>
                    <td class="p-4 ${rarityClass}">${rarityText}</td>
                    <td class="p-4 text-gray-400 text-xs font-mono">${mount.cost}</td>
                `;
                tbody.appendChild(tr);
            });
        }

        // --- Pets Logic (NEW) ---
        function renderPets() {
            const container = document.getElementById('pets-container');
            if (!container) return;
            container.innerHTML = '';
            
            const categories = petsData.reduce((acc, pet) => {
                acc[pet.rarity] = acc[pet.rarity] || [];
                acc[pet.rarity].push(pet);
                return acc;
            }, {});

            Object.keys(categories).forEach(rarity => {
                const rData = rarityClasses[rarity] || { bg: 'bg-slate-700/50 border-slate-600', text: 'text-gray-300', icon: 'text-gray-400' };
                
                const sectionHtml = `
                    <div class="rarity-group p-4 rounded-xl border-t-4 ${rData.bg}">
                        <h3 class="text-xl font-bold mb-4 ${rData.text} flex items-center"><i class="fas fa-certificate mr-3 ${rData.icon}"></i> ${rarity} Pets</h3>
                        <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4" id="pets-rarity-${rarity.replace(/\s/g, '-')}">
                            <!-- Pet Cards will go here -->
                        </div>
                    </div>
                `;
                container.insertAdjacentHTML('beforeend', sectionHtml);

                const grid = document.getElementById(`pets-rarity-${rarity.replace(/\s/g, '-')}`);
                categories[rarity].forEach(pet => {
                    const cardHtml = `
                        <div class="bg-slate-800 p-3 rounded-lg border ${rData.bg} shadow-md flex flex-col items-center justify-center hover:bg-slate-700 transition cursor-pointer" onclick="showPetDetails('${pet.name}')">
                            <i class="${pet.icon} text-3xl mb-2 ${rData.icon}"></i>
                            <h4 class="font-bold text-sm ${rData.text} text-center">${pet.name}</h4>
                            <span class="text-[10px] text-gray-400">${pet.passive}</span>
                        </div>
                    `;
                    grid.insertAdjacentHTML('beforeend', cardHtml);
                });
            });
        }

        window.showPetDetails = function(petName) {
            const pet = petsData.find(p => p.name === petName);
            if (!pet) return;

            const modal = document.getElementById('pet-detail-modal');
            const rData = rarityClasses[pet.rarity] || { bg: 'bg-slate-700/50 border-slate-600', text: 'text-gray-300', icon: 'text-gray-400' };

            // Set content
            document.getElementById('pet-modal-icon').className = `${pet.icon} text-4xl mb-2 ${rData.icon}`;
            document.getElementById('pet-modal-name').innerText = pet.name;
            
            const raritySpan = document.getElementById('pet-modal-rarity');
            raritySpan.innerText = pet.rarity;
            raritySpan.className = `inline-block px-3 py-1 text-xs font-mono rounded-full mt-1 uppercase font-bold ${rData.bg} border ${rData.text}`;
            
            document.getElementById('pet-modal-passive').innerText = pet.passive;
            document.getElementById('pet-modal-desc').innerHTML = pet.passive_desc;
            document.getElementById('pet-modal-lvl25').innerText = pet.lvl25;
            document.getElementById('pet-modal-lvl50').innerText = pet.lvl50;

            // Apply specific border color to the modal
            modal.querySelector('.bg-slate-900').style.borderColor = rData.text.replace('text-', '#').replace('-300', '500');

            // Show modal
            modal.classList.remove('hidden');
        }

        window.hidePetDetails = function() {
            document.getElementById('pet-detail-modal').classList.add('hidden');
        }

        // --- Initialization ---
        window.onload = function() {
            setLang('en');
            renderMounts();
            renderPets(); 
            // Add global click listener to hide modal on outside click (optional)
            document.addEventListener('click', (e) => {
                const modal = document.getElementById('pet-detail-modal');
                if (!modal.classList.contains('hidden')) {
                    const modalContent = modal.querySelector('div');
                    if (modalContent && !modalContent.contains(e.target) && !e.target.closest('.rarity-group')) {
                        hidePetDetails();
                    }
                }
            });
        };

    </script>
</body>
</html>
